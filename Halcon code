Width := 512
Height := 512
dev_close_window()
dev_update_off()
dev_open_window (0, 0, Width / 2, Height / 2, 'black', WindowHandle1)
dev_open_window (0, Width / 2 + 12, Width / 2, Height / 2, 'black', WindowHandle2)
dev_open_window (Height / 2 + 62, 0, Width / 2, Height / 2, 'black', WindowHandle3)
read_cam_par ('C:/Users/SVT/Desktop/bharath/Parameters/CamParamL.dat', CameraParam)
read_cam_par ('C:/Users/SVT/Desktop/bharath/Parameters/CamParamR.dat', CameraParam1)
read_pose    ('C:/Users/SVT/Desktop/bharath/Parameters/RelPose.dat', Pose)
dev_set_window (WindowHandle1)
read_image (imgL1, 'C:/Users/SVT/Desktop/bharath/3/imgL1.png')
dev_display (imgL1)
dev_set_window(WindowHandle2)
read_image (imgR1, 'C:/Users/SVT/Desktop/bharath/3/imgR1.png')
dev_display (imgR1)
gen_binocular_rectification_map (Map1, Map2, CameraParam, CameraParam1, Pose, 1, 'viewing_direction', 'bilinear', CamParamRect1, CamParamRect2, CamPoseRect1, CamPoseRect2, RelPoseRect)
map_image (imgL1, Map1, ImageRectifiedL)
map_image (imgR1, Map2, ImageRectifiedR)
dev_set_window (WindowHandle1)
dev_clear_window ()
dev_display  (ImageRectifiedL)
disp_message (WindowHandle1, 'Left rectified image', 'window', 10, 10, 'black', 'true')
dev_set_window (WindowHandle2)
dev_clear_window ()
dev_display    (ImageRectifiedR)
disp_message   (WindowHandle2, 'Right rectified image', 'window', 10, 10, 'black', 'true')
dev_set_window (WindowHandle3)
dev_clear_window ()
binocular_disparity (ImageRectifiedL, ImageRectifiedR, Disparity, Score, 'ncc', 11, 11, 45, -250, 300, 1, 0.5, 'none', 'interpolation')
dev_display (Disparity)
disparity_image_to_xyz (Disparity, X, Y, Z, CamParamRect1, CamParamRect2, RelPoseRect)
get_region_points (X, Rows, Columns)
get_grayval (X, Rows, Columns, XValues)
get_grayval (Y, Rows, Columns, YValues)
get_grayval (Z, Rows, Columns, ZValues)
create_matrix(263095, 3, 0, MatrixID)
* set_full_matrix(MatrixID, true)
create_matrix(263095, 1, XValues, MatrixID1)
create_matrix(263095, 1, YValues, MatrixID2)
create_matrix(263095, 1, ZValues, MatrixID3)

set_sub_matrix(MatrixID, MatrixID1, 0,0)
set_sub_matrix(MatrixID, MatrixID2, 0,1)
set_sub_matrix(MatrixID, MatrixID3, 0, 2)
write_matrix(MatrixID, 'ascii', 'C:/Users/SVT/Desktop/bharath/matrix')
